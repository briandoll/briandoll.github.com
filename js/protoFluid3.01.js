/*!
 ProtoFluid 3.01, protofluid.com
 Endlessly tweaked by Edward Cant. @opticswerve. */

var bExecProtoFluid; /*! Set to true to enable auto execution */

var protoFluidResetCSS="data:text/css;base64,aHRtbCxib2R5LGRpdixzcGFuLGFwcGxldCxvYmplY3QsaWZyYW1lLGgxLGgyLGgzLGg0LGg1LGg2LHAsYmxvY2txdW90ZSxwcmUsYSxhYmJyLGFjcm9ueW0sYWRkcmVzcyxiaWcsY2l0ZSxjb2RlLGRlbCxkZm4sZW0saW1nLGlucyxrYmQscSxzLHNhbXAsc21hbGwsc3RyaWtlLHN0cm9uZyxzdWIsc3VwLHR0LHZhcixiLHUsaSxjZW50ZXIsZGwsZHQsZGQsb2wsdWwsbGksZmllbGRzZXQsZm9ybSxsYWJlbCxsZWdlbmQsdGFibGUsY2FwdGlvbix0Ym9keSx0Zm9vdCx0aGVhZCx0cix0aCx0ZCxhcnRpY2xlLGFzaWRlLGNhbnZhcyxkZXRhaWxzLGVtYmVkLGZpZ3VyZSxmaWdjYXB0aW9uLGZvb3RlcixoZWFkZXIsaGdyb3VwLG1lbnUsbmF2LG91dHB1dCxydWJ5LHNlY3Rpb24sc3VtbWFyeSx0aW1lLG1hcmssYXVkaW8sdmlkZW97bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowO2ZvbnQtc2l6ZToxMDAlO2ZvbnQ6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZTt9YXJ0aWNsZSxhc2lkZSxkZXRhaWxzLGZpZ2NhcHRpb24sZmlndXJlLGZvb3RlcixoZWFkZXIsaGdyb3VwLG1lbnUsbmF2LHNlY3Rpb257ZGlzcGxheTpibG9jazt9Ym9keXtsaW5lLWhlaWdodDoxO31vbCx1bHtsaXN0LXN0eWxlOm5vbmU7fWJsb2NrcXVvdGUscXtxdW90ZXM6bm9uZTt9YmxvY2txdW90ZTpiZWZvcmUsYmxvY2txdW90ZTphZnRlcixxOmJlZm9yZSxxOmFmdGVye2NvbnRlbnQ6Jyc7Y29udGVudDpub25lO310YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ym9yZGVyLXNwYWNpbmc6MDt9",
protoFluidCSS="data:text/css;base64,Ym9keXtiYWNrZ3JvdW5kOiMyMjI7Y29sb3I6I2JiYjtmb250LWZhbWlseTonSGVsdmV0aWNhIE5ldWUnLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxNnB4O2hlaWdodDoxMDAlO2xpbmUtaGVpZ2h0OjE7bWFyZ2luOjA7cGFkZGluZzowO292ZXJmbG93OmF1dG87dGV4dC1hbGlnbjpjZW50ZXI7fWJvZHkgYXtjdXJzb3I6cG9pbnRlcjt0ZXh0LWRlY29yYXRpb246bm9uZTt9aDJ7Y29sb3I6IzQ0NDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjJlbTtoZWlnaHQ6MzRweDtwYWRkaW5nOjE2cHggMCAwO3RleHQtaW5kZW50OjMycHg7fXB7bWFyZ2luLWJvdHRvbToxLjVlbTt9YXtjb2xvcjojOTk5O2N1cnNvcjpwb2ludGVyO3RleHQtZGVjb3JhdGlvbjpub25lO31hOmxpbmssYTp2aXNpdGVke2NvbG9yOiM5OTk7fWE6aG92ZXIsYTphY3RpdmV7Y29sb3I6Izk5OTt9YTpmb2N1c3tvdXRsaW5lOjFweCBkb3R0ZWQgYmxhY2s7fSo6OnNlbGVjdGlvbjpub3QoLnNlbGVjdGFibGUpe2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwKTt9Kjo6LW1vei1zZWxlY3Rpb246bm90KC5zZWxlY3RhYmxlKXtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMCk7fWh0bWx7LXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOnJnYmEoMCwwLDAsMCk7LXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0Om5vbmU7LXdlYmtpdC10b3VjaC1jYWxsb3V0Om5vbmU7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO31ib2R5e292ZXJmbG93OmhpZGRlbjt9I3Byb3RvRmx1aWR7d2lkdGg6MTAwJTtoZWlnaHQ6MDtwb3NpdGlvbjpmaXhlZDtib3R0b206MDtsZWZ0OjA7ei1pbmRleDoxMDAxMDt9aWZyYW1le2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6bm9uZTtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO3Zpc2liaWxpdHk6aGlkZGVuO3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6NTt9I2J1eXtiYWNrZ3JvdW5kOiMwNGY7Ym9yZGVyOjFweCBzb2xpZCAjMDI5O2JvcmRlci1yYWRpdXM6OHB4O2JveC1zaGFkb3c6MCAwIDhweCByZ2JhKDAsMCwwLDAuOCk7Y29sb3I6I2VlZTtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6MTRweCAyNHB4IDE2cHggMjBweDtwb3NpdGlvbjpmaXhlZDt0b3A6MTZweDtsZWZ0OjE2cHg7dGV4dC1hbGlnbjpjZW50ZXI7ei1pbmRleDoxMDtiYWNrZ3JvdW5kLWltYWdlOi1tb3otbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMC4zKSxyZ2JhKDAsMCwwLDApKTtiYWNrZ3JvdW5kLWltYWdlOi1tcy1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwLjMpLHJnYmEoMCwwLDAsMCkpO2JhY2tncm91bmQtaW1hZ2U6LW8tbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMC4zKSxyZ2JhKDAsMCwwLDApKTtiYWNrZ3JvdW5kLWltYWdlOi13ZWJraXQtbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMC4zKSxyZ2JhKDAsMCwwLDApKTt9I2J1eTphZnRlcntjb250ZW50OicnO2JvcmRlci10b3AtbGVmdC1yYWRpdXM6OHB4O2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjhweDtib3JkZXItdG9wOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMyk7aGVpZ2h0OjUwJTt3aWR0aDoxMDAlO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt9I3Byb3RvRmx1aWRGcmFtZXtiYWNrZ3JvdW5kOiMxMTE7Ym9yZGVyOjFweCBzb2xpZCAjMDAwO2JvcmRlci1ib3R0b20tY29sb3I6IzBiMGIwYjtib3JkZXItcmFkaXVzOjEycHg7Ym94LXNoYWRvdzowIDAgMTZweCByZ2JhKDAsMCwwLDAuNSk7b3ZlcmZsb3c6aGlkZGVuO2Rpc3BsYXk6bm9uZTt9I3Byb3RvRmx1aWRGcmFtZTpiZWZvcmV7Y29udGVudDonJztib3JkZXItdG9wOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMik7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czoxMnB4O2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjEycHg7aGVpZ2h0OjEyOHB4O3dpZHRoOjEwMCU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3otaW5kZXg6MztiYWNrZ3JvdW5kLWltYWdlOi1tb3otbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMC4xMikscmdiYSgyNTUsMjU1LDI1NSwwKSk7YmFja2dyb3VuZC1pbWFnZTotbXMtbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMC4xMikscmdiYSgyNTUsMjU1LDI1NSwwKSk7YmFja2dyb3VuZC1pbWFnZTotby1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwLjEyKSxyZ2JhKDI1NSwyNTUsMjU1LDApKTtiYWNrZ3JvdW5kLWltYWdlOi13ZWJraXQtbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMC4xMikscmdiYSgyNTUsMjU1LDI1NSwwKSk7fSNwcm90b0ZsdWlkRnJhbWU6YWZ0ZXJ7Y29udGVudDonJztoZWlnaHQ6MTYwcHg7d2lkdGg6MTAwJTtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MzJweDtsZWZ0OjA7ei1pbmRleDozO2JhY2tncm91bmQtaW1hZ2U6LW1vei1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwKSxyZ2JhKDAsMCwwLDAuMDgpKTtiYWNrZ3JvdW5kLWltYWdlOi1tcy1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwKSxyZ2JhKDAsMCwwLDAuMDgpKTtiYWNrZ3JvdW5kLWltYWdlOi1vLWxpbmVhci1ncmFkaWVudChyZ2JhKDI1NSwyNTUsMjU1LDApLHJnYmEoMCwwLDAsMC4wOCkpO2JhY2tncm91bmQtaW1hZ2U6LXdlYmtpdC1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwKSxyZ2JhKDAsMCwwLDAuMDgpKTt9LmdsYXJle2JvcmRlci1yYWRpdXM6MTJweDtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO3Bvc2l0aW9uOmFic29sdXRlO30uZ2xhcmU6YmVmb3JlLC5nbGFyZTphZnRlcntjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6NDtiYWNrZ3JvdW5kLWltYWdlOi1tb3otbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMC4xKSxyZ2JhKDI1NSwyNTUsMjU1LDApKTtiYWNrZ3JvdW5kLWltYWdlOi1tcy1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwLjEpLHJnYmEoMjU1LDI1NSwyNTUsMCkpO2JhY2tncm91bmQtaW1hZ2U6LW8tbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMC4xKSxyZ2JhKDI1NSwyNTUsMjU1LDApKTtiYWNrZ3JvdW5kLWltYWdlOi13ZWJraXQtbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMC4xKSxyZ2JhKDI1NSwyNTUsMjU1LDApKTt9LmdsYXJlOmJlZm9yZXtoZWlnaHQ6MjU2cHg7d2lkdGg6MjU2cHg7b3BhY2l0eTouNDt0b3A6LTY0cHg7cmlnaHQ6OHB4Oy1tb3otdHJhbnNmb3JtOnJvdGF0ZSgtMjBkZWcpOy1tcy10cmFuc2Zvcm06cm90YXRlKC0yMGRlZyk7LW8tdHJhbnNmb3JtOnJvdGF0ZSgtMjBkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtMjBkZWcpO30uZ2xhcmU6YWZ0ZXJ7aGVpZ2h0OjE2MHB4O3dpZHRoOjI1NnB4O29wYWNpdHk6LjM7bGVmdDo2NHB4O2JvdHRvbTotNjBweDstbW96LXRyYW5zZm9ybTpyb3RhdGUoMTYwZGVnKTstbXMtdHJhbnNmb3JtOnJvdGF0ZSgxNjBkZWcpOy1vLXRyYW5zZm9ybTpyb3RhdGUoMTYwZGVnKTstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMTYwZGVnKTt9I21hc2t7YmFja2dyb3VuZDojMTExO2JhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwwLjkpO2Rpc3BsYXk6bm9uZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29wYWNpdHk6Ljk4O3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTowO2xlZnQ6MDt6LWluZGV4OjEwMTAwO30ubWVudUJhcntiYWNrZ3JvdW5kOiMxYjFiMWI7Ym9yZGVyLXRvcDoxcHggc29saWQgIzExMTtib3gtc2hhZG93OjAgMCA4cHggcmdiYSgwLDAsMCwwLjMpO3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDtib3R0b206MDt0ZXh0LWFsaWduOmxlZnQ7d2lkdGg6MTAwJTt9Lm1lbnVCYXIgYS5kaXNhYmxlZHtvcGFjaXR5Oi4yO30ubWVudUJhcjpiZWZvcmV7Y29udGVudDonJztib3JkZXItdG9wOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDUpO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDtoZWlnaHQ6OTklO3dpZHRoOjEwMCU7fSNtZW51QmFye2hlaWdodDoxMjhweDt3aWR0aDoxMDAlO2JvdHRvbTotMTI5cHg7ei1pbmRleDoxMDAwMzt9I21lbnVCYXIgdWx7YmFja2dyb3VuZDojMWIxYjFiO2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjEwMCU7d2lkdGg6NzY4cHg7bWFyZ2luOjAgYXV0bzt9I21lbnVCYXIgdWwuZGVtb3t3aWR0aDoyNTZweDt9I21lbnVCYXIgbGl7ZmxvYXQ6bGVmdDtoZWlnaHQ6MTI4cHg7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6MTI4cHg7dGV4dC1hbGlnbjpsZWZ0O30uYXJyb3dJY29ue2hlaWdodDo5NnB4O3dpZHRoOjk2cHg7cG9zaXRpb246YWJzb2x1dGU7fS5hcnJvd0ljb246YWZ0ZXJ7Y29udGVudDonJztib3JkZXItcmlnaHQ6MTJweCBzb2xpZCAjY2NjO2JvcmRlci1ib3R0b206MTJweCBzb2xpZCAjY2NjO2hlaWdodDoyNHB4O3dpZHRoOjI0cHg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjI4cHg7bGVmdDoyOHB4O30ubGlua0ljb246YmVmb3Jle2NvbnRlbnQ6Jyc7YmFja2dyb3VuZDojMTExO2hlaWdodDoyOHB4O3dpZHRoOjEwcHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo0M3B4O3RvcDozNHB4O3otaW5kZXg6Mzt9LmxpbmtJY29uOmFmdGVye2NvbnRlbnQ6Jyc7YmFja2dyb3VuZDojZWVlO2JvcmRlci1yYWRpdXM6NnB4O2hlaWdodDoyOHB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjQ2cHg7dG9wOjM0cHg7ei1pbmRleDozO30ubGlua0ljb24gLmxpbmtJY29uSGVhZHtiYWNrZ3JvdW5kOiNlZWU7Ym9yZGVyLXJhZGl1czo2cHg7Ym9yZGVyOm5vbmU7aGVpZ2h0OjI4cHg7d2lkdGg6MjhweDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTZweDtsZWZ0OjM0cHg7fS5saW5rSWNvbiAubGlua0ljb25IZWFkOmJlZm9yZXtjb250ZW50OicnO2JhY2tncm91bmQ6IzExMTtib3JkZXItcmFkaXVzOjNweDtoZWlnaHQ6MjJweDt3aWR0aDoyMnB4O3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6M3B4O3RvcDozcHg7fS5saW5rSWNvbiAubGlua0ljb25UYWlse3RvcDphdXRvO2JvdHRvbToxNnB4O30ucGxheUljb257aGVpZ2h0Ojk2cHg7d2lkdGg6OTZweDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTZweDtsZWZ0OjA7fS5wbGF5SWNvbjpiZWZvcmV7Y29udGVudDonJztiYWNrZ3JvdW5kOiNlZWU7aGVpZ2h0OjMycHg7d2lkdGg6MzJweDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTJweDtsZWZ0OjA7fS5wbGF5SWNvbjphZnRlcntjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt9LnBvd2VySWNvbntoZWlnaHQ6OTZweDt3aWR0aDo5NnB4O3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxNnB4O2xlZnQ6MTZweDt9LnBvd2VySWNvbjpiZWZvcmV7Y29udGVudDonJztib3JkZXI6NHB4IHNvbGlkICNlZWU7Ym9yZGVyLXJhZGl1czozMnB4O2hlaWdodDozMnB4O3dpZHRoOjMycHg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEycHg7bGVmdDoxMnB4O30ucG93ZXJJY29uOmFmdGVye2NvbnRlbnQ6Jyc7YmFja2dyb3VuZDojZWVlO2JvcmRlcjo2cHggc29saWQgIzExMTtib3JkZXItcmFkaXVzOjhweDt3aWR0aDo0cHg7aGVpZ2h0OjE2cHg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjNweDtsZWZ0OjI0cHg7fS5zcGFubmVySWNvbiAuc3Bhbm5lckVuZHtiYWNrZ3JvdW5kOiNlZWU7Ym9yZGVyLXJhZGl1czoxNnB4O2JvcmRlcjpub25lO2hlaWdodDoyNHB4O3dpZHRoOjI0cHg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjE2cHg7bGVmdDozNnB4O30uc3Bhbm5lckljb24gLnNwYW5uZXJFbmQ6YWZ0ZXJ7Y29udGVudDonJztiYWNrZ3JvdW5kOiMxMTE7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czo0cHg7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6NHB4O2hlaWdodDoxMnB4O3dpZHRoOjEycHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo0cHg7dG9wOi0xcHg7fS5zcGFubmVySWNvbiAuc3Bhbm5lckhhbmRsZXtiYWNrZ3JvdW5kOiNlZWU7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6NHB4O2hlaWdodDo0NHB4O3dpZHRoOjEycHg7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjE2cHg7bGVmdDo0MnB4O30uc3Bhbm5lckljb24gLnNwYW5uZXJIYW5kbGU6YmVmb3Jle2NvbnRlbnQ6Jyc7YmFja2dyb3VuZDojY2NjO2hlaWdodDoxMDAlO3dpZHRoOjdweDtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MDtsZWZ0OjA7ei1pbmRleDoxO30uc3Bhbm5lckljb24gLnNwYW5uZXJIYW5kbGU6YWZ0ZXJ7Y29udGVudDonJztiYWNrZ3JvdW5kOiMwMDA7aGVpZ2h0OjNweDt3aWR0aDozcHg7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjRweDtsZWZ0OjNweDt6LWluZGV4OjI7fS5waG9uZUljb257Ym9yZGVyLXJhZGl1czo0OHB4O2hlaWdodDo5NnB4O3dpZHRoOjk2cHg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO30ucGhvbmVJY29uIC5waG9uZUljb25CdXR0b257YmFja2dyb3VuZDojMTExO2JvcmRlci1yYWRpdXM6MnB4O3dpZHRoOjZweDtoZWlnaHQ6NnB4O3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6NDVweDt0b3A6NzFweDt9LnBob25lSWNvbjpiZWZvcmV7Y29udGVudDonJztiYWNrZ3JvdW5kOiNkZGQ7Ym9yZGVyLXJhZGl1czozcHg7aGVpZ2h0OjY0cHg7d2lkdGg6MzJweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjMycHg7dG9wOjE2cHg7fS5waG9uZUljb246YWZ0ZXJ7Y29udGVudDonJztiYWNrZ3JvdW5kOiMxMTE7aGVpZ2h0OjUwcHg7d2lkdGg6MjhweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjM0cHg7dG9wOjE4cHg7fS5oZWlnaHRJY29ue3dpZHRoOjk2cHg7aGVpZ2h0Ojk2cHg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO30uaGVpZ2h0SWNvbjpiZWZvcmV7Y29udGVudDonJztiYWNrZ3JvdW5kOiNkZGQ7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czo0cHg7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6NHB4O2JveC1zaGFkb3c6MCAwIDhweCByZ2JhKDAsMCwwLDAuNCk7aGVpZ2h0OjQ0cHg7d2lkdGg6MzJweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjMycHg7dG9wOjE2cHg7fS5oZWlnaHRJY29uOmFmdGVye2NvbnRlbnQ6Jyc7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci10b3A6bm9uZTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjRweDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czo0cHg7Ym94LXNoYWRvdzpub25lO2hlaWdodDoxNnB4O3dpZHRoOjMwcHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDozMnB4O2JvdHRvbToxNnB4O30uaGVpZ2h0SWNvbi5vbjphZnRlcntiYWNrZ3JvdW5kOiNkZGQ7fS5idXR0b257YmFja2dyb3VuZDojMTExO2JvcmRlci1yYWRpdXM6NjRweDtoZWlnaHQ6MTI4cHg7d2lkdGg6MTI4cHg7b3BhY2l0eTouOTt0ZXh0LWluZGVudDotOTk5OXB4O3otaW5kZXg6MTAwMDM7fSNwcmV2aW91c3toZWlnaHQ6OTZweDt3aWR0aDo5NnB4O3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxNnB4O2xlZnQ6MTZweDt9I3ByZXZpb3VzIC5hcnJvd0ljb257cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowOy1tb3otdHJhbnNmb3JtOnJvdGF0ZSgxMzVkZWcpOy1tcy10cmFuc2Zvcm06cm90YXRlKDEzNWRlZyk7LW8tdHJhbnNmb3JtOnJvdGF0ZSgxMzVkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxMzVkZWcpO30jcHJldmlvdXMgLmFycm93SWNvbjphZnRlcntib3JkZXItYm90dG9tLWNvbG9yOiNlZWU7fSNuZXh0e2hlaWdodDo5NnB4O3dpZHRoOjk2cHg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjE2cHg7bGVmdDoxNnB4O30jbmV4dCAuYXJyb3dJY29ue3RvcDowOy1tb3otdHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpOy1tcy10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7LW8tdHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO30jbmV4dCAuYXJyb3dJY29uOmFmdGVye2JvcmRlci1yaWdodC1jb2xvcjojZWVlO30jaGVpZ2h0e2hlaWdodDo5NnB4O3dpZHRoOjk2cHg7cG9zaXRpb246YWJzb2x1dGU7dG9wOjE2cHg7bGVmdDoxNnB4O30jaGVpZ2h0Lm9uIC5oZWlnaHRJY29uOmFmdGVye2JhY2tncm91bmQ6I2RkZDt9I3JvdGF0ZXtoZWlnaHQ6OTZweDt3aWR0aDo5NnB4O3RvcDoxNnB4O2xlZnQ6MTZweDtwb3NpdGlvbjphYnNvbHV0ZTt9I3JvdGF0ZS5vbiAucGhvbmVJY29uey1tb3otdHJhbnNmb3JtOnJvdGF0ZSgtOTBkZWcpOy1tcy10cmFuc2Zvcm06cm90YXRlKC05MGRlZyk7LW8tdHJhbnNmb3JtOnJvdGF0ZSgtOTBkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtOTBkZWcpO30jc2V0dGluZ3MsI2xpbmt7aGVpZ2h0Ojk2cHg7d2lkdGg6OTZweDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTZweDtsZWZ0OjE2cHg7LW1vei10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7LW1zLXRyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTstby10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7fSNwcmV2aWV3e2hlaWdodDo5NnB4O3dpZHRoOjk2cHg7fSNlbWFpbHtoZWlnaHQ6OTZweDt3aWR0aDo5NnB4O30jZW1haWw6YmVmb3Jle2NvbnRlbnQ6Jyc7Ym9yZGVyLXdpZHRoOjAgMXB4IDFweCAwO2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItY29sb3I6IzExMTtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjI0cHg7dG9wOi0zcHg7d2lkdGg6NDhweDtoZWlnaHQ6NDhweDt6LWluZGV4OjEwOy1tb3otdHJhbnNmb3JtOnJvdGF0ZSgzOWRlZykgc2tldygtMTJkZWcpOy1tcy10cmFuc2Zvcm06cm90YXRlKDM5ZGVnKSBza2V3KC0xMmRlZyk7LW8tdHJhbnNmb3JtOnJvdGF0ZSgzOWRlZykgc2tldygtMTJkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzOWRlZykgc2tldygtMTJkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzlkZWcpIHNrZXcoLTEyZGVnKTt9I2VtYWlsIGE6YmVmb3Jle2NvbnRlbnQ6Jyc7cG9zaXRpb246YWJzb2x1dGU7bGVmdDoyNHB4O3RvcDozMnB4O2JhY2tncm91bmQ6I2ZmZjt3aWR0aDo0OHB4O2hlaWdodDozMnB4O30ub3NCdXR0b257YmFja2dyb3VuZDojMTExO2JvcmRlci1yYWRpdXM6OHB4O2NvbG9yOiNjY2M7bWluLXdpZHRoOjMycHg7cGFkZGluZzoxNnB4IDI0cHg7dGV4dC1hbGlnbjpjZW50ZXI7cG9zaXRpb246cmVsYXRpdmU7fSNpbmZve2N1cnNvcjpwb2ludGVyO2NvbG9yOiNjY2M7ZGlzcGxheTpibG9jaztoZWlnaHQ6NjRweDt3aWR0aDoxMDAlO3BhZGRpbmc6MzJweCAwIDA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO292ZXJmbG93OmhpZGRlbjt0ZXh0LWFsaWduOmNlbnRlcjt6LWluZGV4OjQ7fSNpbmZvLm5vRnJhbWV7cGFkZGluZzoxNnB4IDAgMDt9I2luZm86aG92ZXJ7Y29sb3I6IzU1NTt9I2dve2JvcmRlci1yaWdodDoxcHggc29saWQgIzE2MTYxNjtoZWlnaHQ6OTZweDt3aWR0aDo5NnB4O3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTowO2xlZnQ6MDt0ZXh0LWluZGVudDotOTk5OXB4O30jZ28ubWluey1tb3otdHJhbnNmb3JtOnNjYWxlKDAuNSk7LW1zLXRyYW5zZm9ybTpzY2FsZSgwLjUpOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDAuNSk7fTsubW9kYWx7ZGlzcGxheTpub25lO2hlaWdodDoxMjhweDtwb3NpdGlvbjpmaXhlZDt9Lm1vZGFsIC53cmFwcGVye3BhZGRpbmc6MzJweCAwIDA7aGVpZ2h0Ojk2cHg7fS5tb2RhbCBhe3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTt9Lm1vZGFsIGlucHV0e2JvcmRlcjoxcHggc29saWQgIzExMTtmb250LXNpemU6MWVtO2hlaWdodDoxZW07cGFkZGluZzoxNnB4O3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTA7fS5tb2RhbCBpbnB1dFt0eXBlPSdzdWJtaXQnXXtjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmJsb2NrO30ubm90aWZ5e2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjMDAwO2JvcmRlci1yaWdodDoxcHggc29saWQgIzAwMDtib3R0b206NzhweDtoZWlnaHQ6MzRweDt3aWR0aDo2NDBweDtwYWRkaW5nOjE2cHggMzJweCAwO3RleHQtYWxpZ246Y2VudGVyO3otaW5kZXg6LTE7fS5ub3RpZnkgLndyYXBwZXJ7cGFkZGluZzowO30ubm90aWZ5IGF7cG9zaXRpb246cmVsYXRpdmU7fS5tb2RhbFN0cm9uZ3tiYWNrZ3JvdW5kOiNhMjI7Ym9yZGVyLWNvbG9yOiMzMTE7Y29sb3I6I2RkZDt9I2xpbmtNb2RhbHt6LWluZGV4Oi0xO30jbGlua01vZGFsIC53cmFwcGVye3dpZHRoOjUyMHB4O21hcmdpbjowIGF1dG87cGFkZGluZy10b3A6NDhweDt9I2xpbmtNb2RhbCAud3JhcHBlciBkaXZ7ZmxvYXQ6bGVmdDttYXJnaW4tbGVmdDozMnB4O3Bvc2l0aW9uOnJlbGF0aXZlO30jbGlua01vZGFsIC5idXR0b257Ym9yZGVyLXJhZGl1czo0OHB4O2Rpc3BsYXk6YmxvY2s7aGVpZ2h0Ojk2cHg7d2lkdGg6OTZweDtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6LTI0cHg7dGV4dC1pbmRlbnQ6LTk5OTlweDt9I2xpbmtNb2RhbCBpbnB1dHt3aWR0aDoyODBweDt9I2xpbmtNb2RhbCBwe21hcmdpbi1sZWZ0OjhweDt9I2xpY2Vuc2VNb2RhbHt0ZXh0LWFsaWduOmNlbnRlcjtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwO30jbGljZW5zZU1vZGFsIC53cmFwcGVye3dpZHRoOjQ0MHB4O21hcmdpbjowIGF1dG87fSNsaWNlbnNlTW9kYWwgaW5wdXR7ZmxvYXQ6bGVmdDt3aWR0aDoyODBweDt9I2xpY2Vuc2VNb2RhbCBpbnB1dFt0eXBlPSdzdWJtaXQnXXttYXJnaW4tbGVmdDoxNnB4O3BhZGRpbmc6MTZweCAxNnB4IDMycHg7d2lkdGg6YXV0bzt9I2xpY2Vuc2VNb2RhbCBhe21hcmdpbi1sZWZ0OjE2cHg7fSN0d2VldHtiYWNrZ3JvdW5kOiMxMTEgdXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRkFBQUFCUUNBWUFBQUNPRWZLdEFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBKzlKUkVGVWVOcnNtMHRJVkZFWXg2OFdXV21aWlVSa1Z2WUNEU0Y2TGFLSDBJdW94Qlk5Y0lwZUVyU293RnBFMmM1bzBTSk1zMXBJWUVsUVNZK0ZsYlVwUXBPZzZHbEVaS2haR1poV1dwcmUvcWY1QkVrZForNmNjKzY1OEgzd1k4WTd6SG44NXQ1enovbk9OY0syYll2RGVVU3lBaGJJQWxrZ0MrUmdnU3lRQmJKQURoYklBbGtnQytSZ2dTeVFCYkpBRGhiSUFsbWcraGhFci9OQklaaWx1d0dEUFN4dkY5Z0c2c0VHT3RZRjVvQXBJQlY4VnQySUNJL3V5dTBHWndKOFhnWTJnUllXMkR2V2dodi9IZnNHeXNGMWNGRm5ZMlFMVEFBcDRMYWk5azRBZFgwYy93R3FRU040RHlyQkZkQ20zS0FRS0pGazJ4L1ZJQWNrU1M3L2lSMTgxSUVzeWZYM1FuYUI0b3h1N3RHSkxuQVZySlpRZHBidExDNTdTYUFncjUrT1BBTjdRYXlETXFOQXErMDhLcndrY0JSb0Q5Q1pyK0E0U0F5aHpGdzcvQ2p6aWtCQldoQWQrZ01LZ2hnbmh3M3dnNFFTQjd3aVVKQUtxb0xvVkNjNEJSTDZLU2ZibGh2eFhoQTRoRjR6UVcyUUhXc0RCL3NvcTBHeXdId3ZDQ3dFSGRUZ1h5RjJzQlJFVWpucHR2eG9vNXVTbEw2cVNpYTg3TEhPamdyeHV4bmdNWWdHNnhXMGJTaFlGT0R6NFNaa1kvTEJoekMrUHhzOEIyc1V0YzlISXJ0akhFZ0gxOEJVVTliQ00raE1HbUhvbWxwa2FqNkNPRENaanBXUVhOc0VnUlkxVE9UcFZobWVvR2dIK3diSThMaWFqWmtHY3VqWE5TV0ord1ZjSWlwTVRhaEdVb0l6azhhV0NJUE9PdEgzMFdBZW1BdGlRQklvQUU5Tk9RTkZlcXZXUTduR1lwQk5hVEVqQklwZitTellZYUNzTHNwWWl6emlYVkJFdVVRang4Q1RORWliRWlMaHV4TjhEemZ0cnpPbHZ4UnNCUXRCRTJXdVkxd1N1QVZjOFBLZVNCWTRBVWE2ZE9uR3lkcHdjbU5iY3dFNDUrTGxlOTZTdUZ2bnhwek01L0w0ZDFUMlBFMTNGTGtvVDZ3MDZtVVc2TllZS0o0YTJBOWl3V0lRcjZIT0ZxcW53MDJCS2JRRWFwUlV2eGdQYjRLeEdnUXVBZmRWTExWQ2laODBobVJJcUZ2TStDczF5VHVrUXQ2L2NMalgwUVNLSFc1UkxnTVBiWDFSb0hKZjJPa1lPQW5VMFB2VGxqOFIrU2pBOUVEa0J0UEFacnFVZElWSXBlMVJXVUU0TnhGeEEzZ054dFBmemVBVitBUmFMZit6ZTJLaVBOTUtNY3NyS1k2Qnc2b3JDZmN1TENTVmduVUdyWE4vVS9LaVJFZGw0YzRET3kzL1hzSVJRK1NWMDB5aFJGZUZzaWJTdVpZL01mbkFKWEYxdEw1ZUFkN3ByRmpGUk5wSDA0WmtEZTJ2b1p0WUhsMjYya1BsU21RajJBNVdLc2ltM0tGMGxMaFVYWDNFVnNkU2JqcU5rOHN0Ly83SUdBZGxpRDNtS25BUDNMTEMyM1Aybk1DZUVVMkR2Q0FSVExUOEd6dmRUd1BZTkIwU2U3WU40QzE0QTE1WWhvWlhuOUkzSnZnL2xWZ2dDMlNCTEpDREJiSkFGc2dDT1ZnZ0MyU0JMSkNEQmJKQUZzZ0NPVmdnQy9SRS9CVmdBRFRTRVpGSHdnM3JBQUFBQUVsRlRrU3VRbUNDKSA4cHggOHB4IG5vLXJlcGVhdDt9I3NldHRpbmdzTW9kYWx7ei1pbmRleDotMTt9I3NldHRpbmdzTW9kYWwgLndyYXBwZXJ7d2lkdGg6MzIwcHg7aGVpZ2h0OjY0cHg7bWFyZ2luOjAgYXV0bztwYWRkaW5nLXRvcDo0OHB4O30jc2V0dGluZ3NNb2RhbCAud3JhcHBlciBkaXZ7ZmxvYXQ6bGVmdDttYXJnaW4tbGVmdDoxNnB4O31AbWVkaWEobWF4LXdpZHRoOjEwMjRweCl7I21lbnVCYXIgdWx7ZmxvYXQ6bGVmdDttYXJnaW46MCAwIDAgMTI4cHg7fSNtZW51QmFyIHVsLmRlbW97ZmxvYXQ6bm9uZTttYXJnaW46MCBhdXRvO319QG1lZGlhKG1heC13aWR0aDo2NDBweCl7I21lbnVCYXIgdWwuZGVtb3tmbG9hdDpsZWZ0O21hcmdpbjowIDAgMCAxMjhweDt9fQ==";
function FlameCSS(){this.flameCSS=function(){};this.inject=function(a){a=a===undefined?window.prompt("New css rule:"):a;var b=document.createElement("style");b.type="text/css";document.getElementsByTagName("head")[0].appendChild(b);b[typeof document.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=a};this.injectExternal=function(a){if(a===undefined)return false;jQuery("head").append('<link href="'+a+'" rel="stylesheet" type="text/css" />')};this.refresh=function(){var a,b,c;b=document.getElementsByTagName("link");
for(a=0;a<b.length;a++){c=b[a];if(c.rel.toLowerCase().match(/stylesheet/)&&c.href){var d=c.href.replace(/(&|%5C?)forceReload=\d+/,"");c.href=d+(d.match(/\?/)?"&":"?")+"forceReload="+(new Date).valueOf()}}};return true}function FlameResource(){return true}
function FlameResourceManager(){this.id="ResourceManager";this.flameResourceManager=function(){this.bCloseGaps=true;this.resources=[];this.totalCountEver=this.totalCount=0};this.flameResourceManagerDestructor=function(){this.removeAll();delete this.resources;bFlameDebug&&console.log("- All "+this.id+" resources deleted")};this.destroy=function(){this.flameResourceManagerDestructor()};this.add=function(a){if(a===undefined||a.id===undefined)bFlameDebug&&console.error(this.id+" resource add failed. Resource or id is not defined.");
else{var b=this.get(a.id);if(b!==undefined){b.refCount++;bFlameDebug&&console.log("- "+this.id+" repeat resource. refCount["+b.refCount+"]")}else{if(this.full()){bFlameDebug&&console.warn(this.id+" resource cap has been reached. ["+a.id+"] not added.");return}a.refCount=1;b=this.firstAvailableSlot();this.resources[b]=a;bFlameDebug&&console.log("- "+this.id+" fresh resource. id["+a.id+"], refCount["+this.resources[b].refCount+"]");this.totalCount++;this.totalCountEver++}return a}};this.closeGaps=function(){for(var a=
this.resources.length;a--;)if(this.resources[a]===undefined){if(a===this.resources.length-1)delete this.resources[a];else{this.resources[a]=this.resources[this.resources.length-1];delete this.resources[this.resources.length-1]}this.resources.length--}};this.firstAvailableSlot=function(){if(this.bCloseGaps)return this.resources.length;for(var a=0;a<this.resources.length;a++)if(this.resources[a]===undefined)return a;return this.resources.length};this.full=function(){if(this.bCloseGaps){if(this.maxResources!==
undefined&&this.maxResources===this.resources.length)return true;return false}if(this.maxResources!==undefined&&this.maxResources===this.totalCount)return true;return false};this.get=function(a){var b=this.resources.length;if(this.bCloseGaps)for(;b--;){if(a===this.resources[b].id)return this.resources[b]}else for(;b--;)if(this.resources[b]!==undefined&&a===this.resources[b].id)return this.resources[b]};this.getIndexOf=function(a){var b=this.resources.length;if(this.bCloseGaps)for(;b--;){if(a===this.resources[b].id)return b}else for(;b--;)if(this.resources[b]!==
undefined&&a===this.resources[b].id)return b};this.lastAvailableSlot=function(){for(var a=this.resources.length;a--;)if(this.resources[a]===undefined)return a;return this.resources.length};this.numSlotsEmpty=function(){if(this.maxResources!==undefined)bFlameDebug&&console.log(this.id+" max resources not defined, tonnes of empty slots");else return this.bCloseGaps?this.maxResources-this.resources.length:this.maxResources-this.totalCount};this.remove=function(a,b){if(a!==undefined){var c=this.getIndexOf(a);
if(c===undefined)bFlameDebug&&console.log(this.id+" attempted deletion of non-existent resource ["+a+"]");else b!==undefined&&b===true?this.removeByIndex(c,true):this.removeByIndex(c,false)}};this.removeAll=function(){var a=this.bCloseGaps;this.bCloseGaps=false;for(var b=0;b<this.resources.length;b++)this.removeByIndex(b,true);this.bCloseGaps=a;this.totalCount=this.resources.length=0};this.removeByIndex=function(a,b){if(!(a===undefined||this.resources[a]===undefined)){if(b===undefined)b=false;this.resources[a].refCount--;
bFlameDebug&&console.log(this.id+" resource deletion. id["+this.resources[a].id+"], index["+a+"]");if(b||this.resources[a].refCount<=0){this.resources[a].destroy!==undefined&&this.resources[a].destroy();a=delete this.resources[a];bFlameDebug&&!a&&console.warn("- Deletion failed");this.bCloseGaps&&this.closeGaps();this.totalCount--}else bFlameDebug&&console.log("- refCount reduced to "+this.resources[a].refCount)}};return true}
function FlameLicense(){this.id="FlameLicense";this.flameLicense=function(){this.app="OpticSwerve";this.localStorage=new FlameLocalStorage;this.localStorage.flameLocalStorage();this.uri=new FlameURI;this.uri.flameURI();this.bStore=this.bCut=false;this.count=0;this.trialCount=10};this.check=function(a,b){if(b!==undefined){if(b===""){try{flameEngine.flameModalManager.addNotification("Please supply a license key")}catch(c){alert("Please supply a license key")}return"fail"}if(b.length<40||b.search(new RegExp("[g-z]",
"g"))!==-1)return"fail";if(!navigator.onLine){try{flameEngine.flameModalManager.addNotification("No connection. Cannot authorise key.")}catch(d){alert("No connection. Cannot authorise key.")}return"fail"}if(jQuery.support.cors===true)return this.process(b,a);else{try{flameEngine.flameModalManager.addNotification("CORS not supported. Cannot authorise key. Upgrade browser.")}catch(e){alert("CORS not supported. Cannot authorise key. Upgrade your browser.")}return"fail"}}if(this.localStorage.get(this.app+
"Plan")!==undefined){this.plan=this.localStorage.get(this.app+"Plan");this.plan!==undefined&&a(this.plan)}else{if(this.localStorage.get(this.app+"Count"))this.count=this.localStorage.getInt(this.app+"Count");this.localStorage.set(this.app+"Count",this.count+1);if(this.localStorage.check(this.app+"Count")){if(this.count>this.trialCount){this.bCut=true;bFlameDebug&&console.log("Usage count expired")}}else{this.bCut=true;bFlameDebug&&console.log("Trial expired. Could not access local storage.")}bFlameDebug&&
console.log("FREE license. "+this.count+" uses. Cut: "+this.bCut);a("free")}};this.greaterThan=function(a){if(this.plan===undefined||a===this.plan)return false;if(a==="free")return true;if(a==="standard")if(this.plan==="pro"||this.plan==="elite")return true;if(a==="pro")if(this.plan==="elite")return true;return false};this.input=function(a){a=a.open("licenseModal");a.bAutoDismiss=false;a.setContent('<form id="licenseForm"><input autocorrect="off" id="licenseInput" type="text" placeholder="license key" /><input class="osButton" id="submitLicense" type="submit" value="submit"></input></form>');
a.show();var b=a.domElement.find("#licenseInput"),c=this;jQuery("#licenseForm").submit(function(){c.check(function(d){c.plan=d;if(c.plan==="standard"){alert("Thank you for purchasing "+c.app);window.location.reload(true)}else if(c.plan==="pro"||c.plan==="elite"){alert("Thank you for purchasing "+c.app+" "+c.plan.substr(0,1).toUpperCase()+c.plan.substr(1));window.location.reload(true)}else alert("Sorry, the supplied license is not valid.")},b.attr("value"));return false})};this.matchesLocal=function(){if(this.localStorage.check(this.app+
"Key"))if(this.localStorage.get(this.app+"Key")===this.key)if(this.localStorage.check(this.app+"Plan"))return true;return false};this.process=function(a,b){try{if(this.app===undefined){console.log("FlameLicense - App name not defined");b("free");return}}catch(c){console.log("App name not present");b("free");return}var d=this.app.replace(" ","_"),e=this;$.post("http://license.opticswerve.com",{app:d,key:a},function(f){if(f==="standard"||f==="pro"||f==="elite"){e.key=a;e.plan=f;e.save()}b(f)})};this.processURI=
function(a){this.uri.getHashVar(this.app+"Key")!==undefined&&this.process(this.uri.getHashVar(this.app+"Key"),a)};this.save=function(){if(this.plan!=="free"){try{if(this.localStorage.get(this.app+"Key")!==this.key){this.localStorage.set(this.app+"Key",this.key);this.localStorage.set(this.app+"Plan",this.plan);console.log("Saved local license. Plan: "+this.plan)}}catch(a){bFlameDebug&&console.warn("Could not save license");return false}return true}};this.toString=function(){alert(this.app+" "+this.plan.substr(0,
1).toUpperCase()+this.plan.substr(1))};return true}
function FlameLocalStorage(){this.id="FlameLocalStorage";this.flameLocalStorage=function(){this.bSupported=false;try{if("localStorage"in window&&window.localStorage!==null)this.bSupported=true}catch(a){}this.bSupported&&window.addEventListener!==undefined&&window.addEventListener("storage",function(b){try{flameEngine.flameLocalStorage.storagePolicy!==undefined&&flameEngine.flameLocalStorage.storagePolicy(b)}catch(c){bFlameDebug&&console.log("FlameLocalStorage event listener error. Probably no FlameEngine.")}},false)};
this.check=function(a){if(this.bSupported===undefined||this.bSupported===false)return false;a=localStorage.getItem(a);if(a===null||a===undefined||a==="undefined")return false;return true};this.clear=function(a){a===undefined?localStorage.clear():this.remove(a)};this.get=function(a){if(this.check(a)){a=localStorage.getItem(a);if(a==="true")return true;else if(a==="false")return false;return a}};this.getFloat=function(a){if(this.check(a))return parseFloat(localStorage.getItem(a))};this.getInt=function(a){if(this.check(a))return parseInt(localStorage.getItem(a))};
this.length=function(){return localStorage.length};this.remove=function(a){localStorage.removeItem(a)};this.set=function(a,b){try{if(b===true)b="true";else if(b===false)b="false";localStorage.setItem(a,b)}catch(c){bFlameDebug&&console.warn("Could not set local storage key. "+c.message)}};return true}FlameLocalStorage.prototype=new FlameResource;
function FlameModalManager(){this.id="FlameModalManager";this.flameModalManager=function(){this.flameResourceManager();this.bCloseAll=true;this.bMultiModal=false;this.notifyDelay=5E3};this.clearNotifyTimeout=function(){if(this.notifyTimeout!==undefined){clearTimeout(this.notifyTimeout);this.notifyTimeout=undefined}};this.close=function(a){var b=this.get(a);if(b!==undefined){b.bNotification&&this.clearNotifyTimeout();this.remove(a)}};this.closeAll=function(a){if(a===true){this.removeAll();this.clearNotifyTimeout()}else for(a=
this.resources.length;a--;)this.resources[a].bNotification||this.removeByIndex(a)};this.closeAllNotifications=function(){this.clearNotifyTimeout();for(var a=this.resources.length;a--;)this.resources[a].bNotification&&this.removeByIndex(a)};this.isOpen=function(a){if(this.get(a)===undefined)return false;return true};this.numOpen=function(a){for(var b=0,c=this.resources.length;c--;)a===true&&this.resources[c].bNotification||b++};this.open=function(a,b){if(this.bMultiModal){if(this.get(a)!==undefined)return}else this.removeAll();
a=this.add(new FlameModal(a));a.flameModal();if(b!==undefined)a.parent=$(b);return a};this.openNotification=function(a,b){var c;if(this.isOpen(a)){c=this.get(a);c.setStrong()}else{this.bMultiModal||this.removeAll();c=this.add(new FlameModal(a));c.flameModal();c.bNotification=true;if(b!==undefined)c.parent=$(b);c.show()}try{flameEngine.flameTimer.addTrigger(a,function(){flameEngine.flameModalManager.remove(a)},this.notifyDelay,false)}catch(d){var e=this;this.clearNotifyTimeout();this.notifyTimeout=
setTimeout(function(){e.remove(a)},this.notifyDelay)}return c};return true}FlameModalManager.prototype=new FlameResource;FlameModalManager.prototype=new FlameResourceManager;
function FlameModal(a){this.id=a!==undefined?a:"modal"+flameEngine.flameModalManager.totalCount;this.flameModal=function(){this.bNotification=false;this.bAutoDismiss=true;this.content=""};this.destroy=function(){if(this.bNotification)try{flameEngine.flameTimer.removeTrigger(this.id)}catch(b){}if(this.domElement!==undefined)this.hidePolicy!==undefined?this.hidePolicy():this.domElement.remove();delete this.domElement;delete this.hidePolicy;delete this.showPolicy};this.append=function(b){this.content+=
b;this.domElement!==undefined&&this.domElement.find(".wrapper").html(b)};this.centre=function(){this.centreX();this.centreY()};this.centreX=function(){var b,c=document.documentElement.clientWidth;if(this.domElement!==undefined)b=this.domElement.outerWidth();else if(this.width!==undefined)b=this.width;else return;this.x=b>=c?0:c/2-b/2;this.domElement!==undefined&&this.domElement.css("left",this.x)};this.centreY=function(){var b,c=document.documentElement.clientHeight;if(this.domElement!==undefined)b=
this.domElement.outerHeight();else if(this.height!==undefined)b=this.height;this.y=b>=c?0:c/2-b/2;this.domElement!==undefined&&this.domElement.css("top",this.y)};this.isString=function(b){return typeof b=="string"};this.prepend=function(b){this.content=b+this.content;this.domElement!==undefined&&this.domElement.find(".wrapper").html(b)};this.setContent=function(b){this.content=b;this.domElement!==undefined&&this.domElement.find(".wrapper").html(b)};this.setHeight=function(b){this.height=this.isString(b)&&
b.indexOf("%")!==-1?document.documentElement.clientHeight*parseInt(b.replace("%",""))/100:b;this.domElement!==undefined&&this.domElement.height(b)};this.setStrong=function(){this.domElement!==undefined&&this.domElement.addClass("modalStrong")};this.setWidth=function(b){this.width=this.isString(b)&&b.indexOf("%")!==-1?document.documentElement.clientWidth*parseInt(b.replace("%",""))/100:b;this.domElement!==undefined&&this.domElement.width(b)};this.setX=function(b){this.x=b;this.domElement!==undefined&&
this.domElement.offset({left:b})};this.setY=function(b){this.y=b;this.domElement!==undefined&&this.domElement.offset({top:b})};this.show=function(){this.domElement=$("#"+this.id);if(this.domElement.length===0){this.parent!==undefined?this.parent.append('<div class="modal" id="'+this.id+'"><div class="wrapper"></div></div>'):$("body").append('<div class="modal" id="'+this.id+'"><div class="wrapper"></div></div>');this.domElement=$("#"+this.id)}this.bNotification&&this.domElement.addClass("notify");
this.setContent(this.content);this.showPolicy!==undefined?this.showPolicy():this.domElement.show();this.height!==undefined&&this.domElement.height(this.height);this.width!==undefined&&this.domElement.width(this.width);this.x!==undefined&&this.domElement.offset({left:this.x});this.y!==undefined&&this.domElement.offset({top:this.y})};return true}FlameModal.prototype=new FlameResource;
function FlameSniff(){this.id="FlameSniff";this.flameSniff=function(){this.bWebkit=this.bOpera=this.bIE=this.bFirefox=false;this.bStandards=true;if(!jQuery.support.opacity)this.bStandards=false;if(navigator.userAgent.indexOf("Opera")!==-1){this.bOpera=true;this.browser="Opera"}else if(navigator.userAgent.indexOf("Firefox")!==-1){this.bFirefox=true;this.browser="Firefox"}else if(navigator.userAgent.indexOf("MSIE")!==-1){this.bIE=true;this.browser="IE"}else if(navigator.userAgent.indexOf("WebKit")!==
-1){this.bWebKit=true;this.browser="Webkit"}};this.toString=function(){return"Browser: "+this.browser+". Standards: "+this.bStandards};return true}
function FlameURI(){this.id="FlameURI";this.flameURI=function(){this.bExecute=true};this.addHashVar=function(a,b){var c;c=this.getHash();if(c!==undefined)if(this.hashVarPresent(a)){var d;d=new RegExp(a+"(?==|&|$)(?:=?[a-zA-Z0-9_,%.*\\+-]*)","g");a=b===undefined?c.replace(d,a):c.replace(d,a+"="+encodeURIComponent(b.toString()))}else a=b===undefined?c+"&"+a:c+"&"+a+"="+encodeURIComponent(b.toString());else a=b===undefined?"?"+a:"?"+a+"="+encodeURIComponent(b.toString());this.removeHash();this.location+=
"#"+a;if(this.bExecute)window.location.hash=a};this.clean=function(){if(this.location.indexOf("#")===this.location.length-1)this.location=this.location.replace("#","")};this.convert=function(a){if(a===undefined||a===true||a===false)return a;else if(a==="")return;else if(a==="true")return true;else if(a==="false")return false;else if(isFinite(a))return Number(a);return a};this.get=function(){if(this.location!==undefined)return this.location;return window.location.href};this.getHash=function(){if(this.location!==
undefined){var a=this.location.indexOf("#");if(a!==-1)return this.location.substr(a+1)}else if(window.location.hash!=="")return window.location.hash.substr(1)};this.getHashVar=function(a){var b=this.getHash();if(b!==undefined){var c=b.indexOf("?");if(c!==-1)b=b.substring(c+1);return this.convert(this.getVar(a,b))}};this.getHashVarParams=function(a,b){if(b===undefined)b=",";a=this.getHashVar(a);if(a!==undefined){b=a.split(b);for(a=0;a<b.length;a++)b[a]=this.convert(b[a]);return b}};this.getHostname=
function(){return window.location.hostname};this.getPathname=function(){return window.location.pathname};this.getQuery=function(){if(window.location.search!=="")return window.location.search};this.getQueryVar=function(a){var b=this.getQuery();if(b!==undefined){var c=b.indexOf("?");b=b.substring(c+1);return this.convert(this.getVar(a,b))}};this.getQueryVarParams=function(a,b){if(b===undefined)b=",";a=this.getQueryVar(a);if(a!==undefined)return a.split(b)};this.getVar=function(a,b){b=b.split("&");for(var c=
0;c<b.length;c++){var d=b[c].split("=");if(d[0]===a){if(d[1]!==undefined)return decodeURIComponent(d[1]);return true}}};this.inHostname=function(a){if(this.getHostname().indexOf(a)>-1)return true;return false};this.inPathname=function(a){if(this.getPathname().indexOf(a)>-1)return true;return false};this.inURL=function(a){if(this.get().indexOf(a)>-1)return true;return false};this.hashVarPresent=function(a){if(window.location.hash==="")return false;a=new RegExp("(^|[?&]{1})"+a+"(?==|&|$)(?:=?[a-zA-Z0-9_,%.*\\+-]*)",
"g");if(this.getHash().search(a)===-1)return false;return true};this.isLocal=function(){if(this.getHostname()===localhost)return true;return false};this.numHashVars=function(){var a=this.getHash();if(a==="")return 0;return a.match(/[\?\&]/gi).length};this.pop=function(){};this.push=function(){this.location=window.location.href;alert(this.location)};this.removeHash=function(){if(this.location!==undefined){var a=this.location.indexOf("#");if(a!==-1)this.location=this.location.substring(0,a)}if(this.bExecute)window.location.hash=
""};this.removeHashVar=function(a){if(window.location.hash==="")return false;var b=new RegExp("(^|[?&]{1})"+a+"(?==|&|$)(?:=?[a-zA-Z0-9_,%.*\\+-]*)","g");if(this.hashVarPresent(a)){a=this.getHash().replace(b,"");if(a.charAt(0)==="&")a="?"+a.substr(1);this.removeHash();this.location+="#"+a;if(this.bExecute)window.location.hash=a}};this.sameDomain=function(){this.getHostName()};return true}var bExecProtoFluid,bFlameDebug=false,bProtoFluidExecuted=false,bProtoFluidReady=false,protoFluid;
(function(){var a=new FlameURI;a.flameURI();if(!bExecProtoFluid&&a.hashVarPresent("protoFluid")){var b=a.getHashVar("protoFluid");bExecProtoFluid=b===undefined||b===false?false:true}if(parent.bExecProtoFluid===true)if(typeof jQuery=="undefined")alert("ProtoFluid requires jQuery.\nhttp://protofluid.com/?c=docs");else{if(parent.bProtoFluidExecuted!==true){console.log("ProtoFluid v3.0. http://protofluid.com. Endlessly tweaked by Edward Cant. @opticswerve.\n\n");b=new FlameSniff;b.flameSniff();if(!b.bStandards){if(a.inHash("protoFluid"))window.location.hash=
"";alert("ProtoFluid requires a modern browser, like Google Chrome. Please upgrade.");removeProtoFluidCode();bProtoFluidReady=true;return}}else bProtoFluidReady=true;jQuery(document).ready(function(){if(parent.bProtoFluidExecuted===true){parent.protoFluid.readyTimeout===undefined&&parent.protoFluid.onLocationChange();removeProtoFluidCode();jQuery("body").addClass("protoFluid");window.onunload=function(){bFlameDebug&&console.log("UNLOAD");p.onLocationChange()};jQuery("body").click(function(c){if(jQuery(c.target).hasClass("launchProtoFluid")){alert("ProtoFluid already running.");
return false}if(jQuery(c.target).hasClass("exitProtoFluid")){exitProtoFluid();return false}else if(jQuery(c.target).hasClass("previewProtoFluid")){var d=jQuery(c.target);c=d.attr("data-width");var e=d.attr("data-height"),f=d.attr("data-desc"),g=d.attr("data-scroll");d=d.attr("data-orientation");protoFluid.uri.addHashVar("protoFluid",c+","+e+","+f);d!==undefined?protoFluid.uri.addHashVar("protoFluidOrientation",d):protoFluid.uri.removeHashVar("protoFluidOrientation");g!==undefined?protoFluid.uri.addHashVar("protoFluidScroll",
g):protoFluid.uri.removeHashVar("protoFluidScroll");parent.window.location.reload(true);return false}});parent.protoFluid.bFrameReady=true;bFlameDebug&&console.log("Frame READY");protoFluid=parent.protoFluid}else{bProtoFluidExecuted=true;window.onhashchange=function(){if(!a.hashVarPresent("protoFluid")||a.getHashVar("protoFluid")===false)window.location.reload(true)};jQuery("*").unbind();jQuery(window).unbind();jQuery("html, body").height(document.documentElement.clientHeight);protoFluid=new ProtoFluid;
protoFluid.protoFluid();window.onunload=function(){var c=protoFluid;if(c.localStorage.bSupported){c.localStorage.set("pfLocation",c.frameURI.location);c.localStorage.set("pfRestrictHeight",c.bRestrictHeight);c.localStorage.set("pfShowBar",c.bShowBar);c.localStorage.set("pfTechInfo",c.bTechInfo);c.localStorage.set("pfLandscape",c.bLandscape);c.localStorage.set("pfFrameIndex",c.currentFrameIndex)}}}})}else{console.log("To enable ProtoFluid, set the variable 'bExecProtoFluid' to true in protoFluid.js or supply a hashtag of #protoFluid\n\n");
bProtoFluidReady=true;if(typeof jQuery=="undefined")alert("ProtoFluid requires jQuery.\nhttp://protofluid.com/?c=docs");else{removeProtoFluidCode();jQuery(document).ready(function(){window.onhashchange=function(){a.hashVarPresent("protoFluid")&&a.getHashVar("protoFluid")!==false&&window.location.reload(true)};jQuery("body").click(function(c){if(jQuery(c.target).hasClass("launchProtoFluid")){launchProtoFluid();return false}else if(jQuery(c.target).hasClass("previewProtoFluid")){var d=jQuery(c.target);
c=d.attr("data-width");var e=d.attr("data-height"),f=d.attr("data-desc"),g=d.attr("data-orientation");d=d.attr("data-scroll");a.addHashVar("protoFluid",c+","+e+","+f);g!==undefined&&a.addHashVar("protoFluidOrientation",g);d!==undefined&&a.addHashVar("protoFluidScroll",d);window.location.reload(true);return false}})})}}})();function addProtoFluidFrame(a,b,c,d){if(protoFluid!==undefined&&!protoFluid.bDemo){protoFluid.addFrame(a,b,c,d);protoFluid.currentFrame===undefined&&protoFluid.setFrame(0)}}
function clearProtoFluidFrames(){try{if(protoFluid!==undefined&&!protoFluid.bDemo){protoFluid.clearFrames();protoFluid.updateBar()}}catch(a){bFlameDebug&&console.log("Failed to clear ProtoFluid frames")}}function exitProtoFluid(){try{protoFluid.uri.removeHashVar("protoFluidOrientation");protoFluid.uri.removeHashVar("protoFluidScroll");protoFluid.uri.removeHashVar("protoFluid");parent.window.location.reload(true);return false}catch(a){bFlameDebug&&console.log("Failed ProtoFluid exit")}}
function launchProtoFluid(){try{var a=new FlameURI;a.flameURI();a.addHashVar("protoFluid");window.location.reload(true)}catch(b){bFlameDebug&&console.log("Failed ProtoFluid launch")}}function protoFluidReady(a){if(a===undefined){if(bProtoFluidReady===true)return true;return false}protoFluidReady()&&typeof jQuery!="undefined"&&jQuery(document).ready(function(){a()})}
function removeProtoFluidCode(){for(var a=jQuery("head link"),b=0;b<a.length;b++)if(a.eq(b).attr("href")===undefined||a.eq(b).attr("href").indexOf("protoFluid")!==-1)a.eq(b).remove();a=jQuery("head script");for(b=0;b<a.length;b++)if(a.eq(b).attr("src")===undefined||a.eq(b).attr("src").indexOf("protoFluid")!==-1)a.eq(b).remove()}function setProtoFluidFrame(a){try{protoFluid!==undefined&&protoFluid.setFrame(a)}catch(b){bFlameDebug&&console.log("Failed to set ProtoFluid frame")}}
function ProtoFluid(){this.protoFluid=function(){this.bLandscape=this.bFrameReady=this.bFrameLoaded=this.bDemo=false;this.bRestrictHeight=true;this.bSameDomain=false;this.bShowFrame=this.bShowBar=true;this.bTechInfo=false;this.frameURI=new FlameURI;this.frameURI.flameURI();this.frameURI.bExecute=false;this.uri=new FlameURI;this.uri.flameURI();if(screen.width<768){alert("ProtoFluid requires a screen width of at least 768 pixels.\n\nPlease try again on a screen that is at least the size of an iPad.");
this.uri.removeHashVar("protoFluidOrientation");this.uri.removeHashVar("protoFluidScroll");this.uri.removeHashVar("protoFluid");window.location.reload(true)}this.localStorage=new FlameLocalStorage;this.localStorage.flameLocalStorage();this.modalManager=new FlameModalManager;this.modalManager.flameModalManager();this.sniff=new FlameSniff;this.sniff.flameSniff();this.frames=[];this.loadFrames();this.scrollY=this.scrollX=0;var a=this.uri.getHashVar("protoFluid");if(a!==undefined&&a.toString().indexOf(",")!==
-1)this.bDemo=true;if(this.bDemo){a=this.uri.getHashVarParams("protoFluid");if(screen.width===a[0]){removeProtoFluidCode();this.uri.removeHashVar("protoFluidOrientation");this.uri.removeHashVar("protoFluidScroll");this.uri.removeHashVar("protoFluid");window.location.reload("true")}var b=this.uri.getHashVar("protoFluidOrientation");if(b===undefined)b=true;var c=this.uri.getHashVar("protoFluidScroll");if(c===undefined)c=true;this.removeClientCode();this.clearFrames();a.length===3?this.addFrame(a[0],
a[1],a[2],b,c):this.addFrame(a[0],a[1],"Custom",b,c);this.setFrame(0)}else this.removeClientCode();a=new FlameCSS;a.flameCSS();a.injectExternal(protoFluidResetCSS);a.injectExternal(protoFluidCSS);jQuery("body").html('<!-- Your code is neatly contained in the following frame --\><iframe class="protoFluid" scrolling="no"></iframe>');this.viewport=jQuery("iframe");jQuery("body").append('<div id="protoFluidFrame"><div class="glare"></div></div>');jQuery("body").append('<a id="info"></a>');jQuery("body").append('<div id="protoFluid"></div>');
jQuery("#protoFluid").append('<div class="menuBar" id="menuBar"><ul></ul></div>');a=jQuery("#menuBar ul");if(this.bDemo){a.addClass("demo");a.append('<li><a class="button" id="rotate">Rotate<div class="icon phoneIcon"><div class="phoneIconButton"></div></div></a></li>');a.append('<li><a class="button" id="height">Restrict height<div class="icon heightIcon"></div></a></li>');this.modalManager.notifyDelay=8E3;setTimeout(function(){var d=protoFluid.modalManager.openNotification("demoNotify","#protoFluid");
d.setContent('<a class = "exe" href="http://protofluid.com">'+protoFluid.currentFrame.desc+" &mdash; A ProtoFluid Viewport</a>");d.domElement.animate({bottom:129},400)},1E3)}else{a.append('<a class="button" id="go">go<div class="icon powerIcon"></div></a>');a.append('<li><a class="button" id="previous">Previous<div class="icon arrowIcon"></div></a></li>');a.append('<li><a class="button" id="next">Next<div class="icon arrowIcon"></div></a></li>');a.append('<li><a class="button" id="rotate">Rotate<div class="icon phoneIcon"><div class="phoneIconButton"></div></div></a></li>');
a.append('<li><a class="button" id="height">Restrict height<div class="icon heightIcon"></div></a></li>');a.append('<li><a class="button" id="link">Link<div class="icon linkIcon"><div class="linkIconHead"></div><div class="linkIconHead linkIconTail"></div></div></a></li>');a.append('<li><a class="button" id="settings">Settings<div class="icon spannerIcon"><div class="spannerEnd"></div><div class="spannerHandle"></div></div></a></li>')}if(this.bDemo)protoFluid.free();else{this.license=new FlameLicense;
this.license.flameLicense();this.license.app="ProtoFluid";this.license.check(function(d){if(d==="standard")protoFluid.standard();else if(d==="pro")protoFluid.pro();else d==="elite"?protoFluid.elite():protoFluid.free()})}if(this.frameURI.location===undefined){if(this.localStorage.check("pfLocation"))this.frameURI.location=this.localStorage.get("pfLocation");this.frameURI.location=window.location.href;bFlameDebug&&console.log("Initial URL: "+this.frameURI.location)}this.frameURI.removeHashVar("protoFluid");
this.frameURI.removeHashVar("protoFluidOrientation");this.frameURI.removeHashVar("protoFluidScroll");this.frameURI.clean();bFlameDebug&&console.log("Cleaned URL: "+this.frameURI.location);this.viewport[0].contentWindow.location=this.frameURI.location;if(this.bDemo)this.setFrame(0);else{this.localStorage.check("pfFrameIndex")?this.setFrame(this.localStorage.getInt("pfFrameIndex")):this.setFrame(0);if(this.localStorage.check("pfShowBar"))if(this.localStorage.get("pfShowBar")===false)this.bShowBar=false}this.menuBar();
this.license!==undefined&&!this.license.bCut&&this.loadPreviousSettings();this.viewport.load(function(){protoFluid.bFrameLoaded=true;bFlameDebug&&console.log("Frame LOADED");protoFluid.bFrameReady||protoFluid.onLocationChangeComplete()});setTimeout(function(){window.onfocus=function(){protoFluid.updateFrame()};window.onresize=function(){jQuery("html, body").height(document.documentElement.clientHeight);protoFluid.updateFrame()};if(!protoFluid.bDemo&&protoFluid.license.bCut){var d=protoFluid.modalManager.openNotification("upgradeNotify",
"#protoFluid");d.setStrong();d.setContent("<p>Trial expired. Please buy a license.</p>");jQuery("body").append('<a class="exe" href="http://protofluid.com" id="buy">Buy ProtoFluid</a>');jQuery("#buy").hide();jQuery("#buy").fadeIn(400)}},1E3)};this.destroy=function(){for(var a=0;a<this.frames.length;a++)delete this.frames[a];delete this.frames;this.currentFrame=undefined};this.addFrame=function(a,b,c,d,e){this.frames.push(new ProtoFluidFrame(a,b,c,d,e))};this.clearFrames=function(){for(var a=this.frames.length;a--;)delete this.frames[a];
this.currentFrame=undefined;this.currentFrameIndex=0;this.frames.length=0};this.cutNotice=function(){var a=protoFluid.modalManager.openNotification("expireNotify","#protoFluid");a.setStrong();a.setContent("<p>Available in the full app. Please support ProtoFluid and buy a license.</p>")};this.disableButtons=function(){jQuery("#height").addClass("disabled");jQuery("#link").addClass("disabled");jQuery("#next").addClass("disabled");jQuery("#previous").addClass("disabled");jQuery("#rotate").addClass("disabled");
jQuery("#settings").addClass("disabled")};this.elite=function(){this.pro()};this.enableButtons=function(){jQuery("#height").removeClass("disabled");jQuery("#link").removeClass("disabled");jQuery("#next").removeClass("disabled");jQuery("#previous").removeClass("disabled");jQuery("#rotate").removeClass("disabled");jQuery("#settings").removeClass("disabled")};this.free=function(){this.initCoreEvents();if(this.license!==undefined&&this.license.bCut){bFlameDebug&&console.log("Cutting features");jQuery("#height").addClass("disabled");
jQuery("#rotate").addClass("disabled");jQuery("#height").click(function(){protoFluid.cutNotice();protoFluid.updateBar();return false});jQuery("#rotate").click(function(){protoFluid.cutNotice();protoFluid.updateBar();return false})}else this.initStandardEvents()};this.heightToggle=function(){if(this.currentFrame===undefined){this.noFrameNotice();this.updateBar()}else{this.modalManager.isOpen("heightNotify")&&this.modalManager.get("heightNotify").setStrong();this.modalManager.closeAll(true);this.bRestrictHeight=
!this.bRestrictHeight;this.updateFrame()}};this.initCoreEvents=function(){jQuery("body, .body").click(function(a){if(jQuery(a.target).hasClass("modal")){a=jQuery(a.target).attr("id");var b=protoFluid.modalManager.get(a);b!==undefined&&b.bAutoDismiss&&protoFluid.modalManager.close(a);protoFluid.updateBar();return false}else if(jQuery(a.target).hasClass("exe"))return true;else if(jQuery(a.target).is("input"))return true;protoFluid.modalManager.closeAll(true);protoFluid.updateBar();return false});jQuery("#go").click(function(){protoFluid.modalManager.closeAll(true);
protoFluid.bShowBar=!protoFluid.bShowBar;protoFluid.menuBar();return false});jQuery("#menuBar").click(function(){return false});jQuery("#info").click(function(){protoFluid.bTechInfo=!protoFluid.bTechInfo;protoFluid.updateInfo();return false});jQuery("#link").click(function(){protoFluid.link();return false});jQuery("#next").click(function(){protoFluid.next();return false});jQuery("#previous").click(function(){protoFluid.previous();return false});jQuery("#settings").click(function(){protoFluid.settings();
return false})};this.initStandardEvents=function(){jQuery("#height").click(function(){protoFluid.heightToggle();return false});jQuery("#rotate").click(function(){protoFluid.rotate();return false})};this.link=function(){if(this.currentFrame===undefined)this.noFrameNotice();else if(this.modalManager.isOpen("linkModal"))this.modalManager.remove("linkModal");else if(this.bFrameReady!==true)this.modalManager.openNotification("linkNotify","#protoFluid").setContent("The current location does not support ProtoFluid");
else{savedURI=this.frameURI.location;this.frameURI.addHashVar("protoFluid",this.currentFrame.width+","+this.currentFrame.height+","+this.currentFrame.desc);this.frameURI.addHashVar("protoFluidOrientation",this.currentFrame.orientation);if(!this.modalManager.isOpen("linkModal")){var a=this.modalManager.open("linkModal","#protoFluid");a.bAutoDismiss=false;a.setContent('<div><input type="url" value="'+this.frameURI.location+'" /></div>');a.append('<div><a class="button exe" href="https://twitter.com/share?text='+
encodeURI(document.title)+"&related=OpticSwerve&via=ProtoFluid&url="+encodeURIComponent(this.frameURI.location)+'" id="tweet" target="_blank">tweet</a></div>');a.show()}this.frameURI.location=savedURI;if(this.frameURI.location.indexOf("localhost")!==-1){jQuery("#tweet").addClass("disabled");bFlameDebug&&console.log("Cannot share a local resource.");jQuery("#tweet").click(function(){protoFluid.modalManager.openNotification("tweetNotify","#protoFluid").setContent("Cannot tweet a local resource");protoFluid.updateBar();
return false})}}this.updateBar()};this.loadFrames=function(a){if(a!=="android")if(a==="apple"){this.addFrame(320,480,"iPhone",true);this.addFrame(768,1024,"iPad",true);this.addFrame(1366,768,"11-inch MacBook Air",false);this.addFrame(1440,900,"13-inch MacBook Air",false);this.addFrame(2560,1440,"27-inch iMac",false)}else if(a==="windows")this.addFrame(480,800,"Nokia Lumia 800",true);else if(a==="standards"){this.addFrame(320,200,"CGA",false);this.addFrame(640,480,"VGA",false);this.addFrame(800,600,
"SVGA",false);this.addFrame(854,480,"WVGA",false);this.addFrame(1400,1050,"SXGA+",false);this.addFrame(1600,1200,"UXGA",false);this.addFrame(1680,1050,"WSXGA+",false);this.addFrame(2048,1080,"2K",false);this.addFrame(4096,2304,"4K",false)}else if(a==="tv"){this.addFrame(852,480,"480p",false);this.addFrame(1280,720,"HD &mdash; 720p",false);this.addFrame(1920,1080,"HD &mdash; 1080p",false)}else if(a==="viewports"){this.addFrame(520,520,"Facebook Page Tab",false);this.addFrame(760,800,"Facebook Canvas App",
false);this.addFrame(980,1470,"iOS Safari Viewport (portrait)",false);this.addFrame(980,653,"iOS Safari Viewport (landscape)",false)}else{this.addFrame(320,480,"iPhone",true);this.addFrame(520,520,"Facebook Page Tab",false);this.addFrame(600,1024,"Kindle Fire",true);this.addFrame(768,1024,"iPad",true);this.addFrame(800,600,"SVGA",false);this.addFrame(980,1470,"iOS Safari Viewport",false);this.addFrame(1280,800,"SXGA+",false);this.addFrame(1440,900,"13-inch MacBook Air",false);this.addFrame(1680,1050,
"WSXGA+",false)}};this.loadPreviousSettings=function(){if(this.localStorage.bSupported){if(this.localStorage.check("pfLandscape"))this.bLandscape=this.localStorage.get("pfLandscape");if(this.localStorage.check("pfRestrictHeight"))this.bRestrictHeight=this.localStorage.get("pfRestrictHeight");if(this.localStorage.check("pfTechInfo"))this.bTechInfo=this.localStorage.get("pfTechInfo")}};this.next=function(){if(this.currentFrame===undefined){this.noFrameNotice();this.updateBar()}else{this.modalManager.isOpen("nextNotify")?
this.modalManager.get("nextNotify").setStrong():this.modalManager.closeAll(true);if(this.currentFrameIndex<this.frames.length-1){this.setFrame(this.currentFrameIndex+1);this.updateFrame()}else{this.modalManager.openNotification("nextNotify","#protoFluid").setContent("No more viewports available. You've reached the end of the list.");this.updateBar()}}};this.noFrameNotice=function(){var a=protoFluid.modalManager.openNotification("noViewportNotify","#protoFluid");a.setStrong();a.setContent("<p>There are no available viewports</p>")};
this.onLocationChange=function(){if(this.readyTimeout===undefined){this.bFrameReady=this.bFrameLoaded=false;this.locationChangeAttempt=0}else if(this.locationChangeAttempt>10){bFlameDebug&&console.log("Gave up on location change");protoFluid.onLocationChangeComplete();return}bFlameDebug&&console.log("Location change attempt: "+this.locationChangeAttempt);this.locationChangeAttempt++;this.readyTimeout=setTimeout(function(){protoFluid.bFrameReady===true?protoFluid.onLocationChangeComplete():protoFluid.onLocationChange()},
500)};this.onLocationChangeComplete=function(){clearTimeout(this.readyTimeout);this.locationChangeAttempt=this.readyTimeout=undefined;if(this.bFrameReady)bFlameDebug&&console.log("Frame SUPPORTS ProtoFluid");else bFlameDebug&&console.log("Frame DOES NOT support ProtoFluid");this.bSameDomain=false;this.currentHostname=undefined;this.frameWindow=this.frameDocument=this.frameURI.location=undefined;this.updateFrameRefs();if(this.originalHostname===undefined)this.originalHostname=this.frameWindow.location.hostname;
try{this.currentHostname=this.frameWindow.location.hostname;this.frameURI.location=this.frameWindow.location.href}catch(a){bFlameDebug&&console.log("Location update error. "+a.message)}if(this.currentHostname===this.originalHostname){bFlameDebug&&console.log("SAME DOMAIN. Original was "+this.originalHostname+". New is "+this.currentHostname+".");this.bSameDomain=true}else{bFlameDebug&&console.log("CROSS DOMAIN. Original: "+this.originalHostname+". New: "+this.currentHostname);this.modalManager.openNotification("domainNotify",
"#protoFluid").setContent("Left original domain. Some features disabled.")}this.updateFrame()};this.previous=function(){if(this.currentFrame===undefined){this.noFrameNotice();this.updateBar()}else{this.modalManager.isOpen("previousNotify")?this.modalManager.get("previousNotify").setStrong():this.modalManager.closeAll(true);if(this.currentFrameIndex!==0){this.setFrame(this.currentFrameIndex-1);this.updateFrame()}else protoFluid.modalManager.openNotification("previousNotify","#protoFluid").setContent("No more viewports available. This is the first one.")}};
this.pro=function(){this.standard()};this.removeClientCode=function(){for(var a=jQuery("head").find("link"),b=0;b<a.length;b++)if(a.eq(b).attr("href")===undefined||a.eq(b).attr("href").indexOf("protoFluid")===-1)a.eq(b).remove();a=jQuery("head").find("script");for(b=0;b<a.length;b++)if(a.eq(b).attr("src")===undefined||a.eq(b).attr("src").indexOf("protoFluid")===-1)a.eq(b).remove()};this.rotate=function(){if(this.currentFrame===undefined){this.noFrameNotice();this.updateBar()}else{this.modalManager.isOpen("rotateNotify")?
this.modalManager.get("rotateNotify").setStrong():this.modalManager.closeAll(true);if(protoFluid.currentFrame.orientation){protoFluid.bLandscape=!protoFluid.bLandscape;protoFluid.updateFrame()}else{protoFluid.modalManager.openNotification("rotateNotify","#protoFluid").setContent("Orientation switching is disabled for this viewport");return false}}};this.scroll=function(a,b){this.scrollX+=a;this.scrollY+=b;this.frameWindow!==undefined&&this.frameWindow.scrollTo(this.scrollX,this.scrollY)};this.setFrame=
function(a){if(a<0||a>=this.frames.length){bFlameDebug&&console.log("Tried to set non-existent frame");a=0}this.currentFrameIndex=a;this.currentFrame=this.frames[a]};this.setHeight=function(a){this.viewport.height(a)};this.setWidth=function(a){this.viewport.width(a)};this.menuBar=function(){if(this.bShowBar)if(this.bDemo)jQuery("#menuBar").css("bottom",0);else{var a=jQuery("#menuBar"),b=jQuery("#go");b.css("bottom",16);b.css("left",16);b.removeClass("min");a.hide();a.css("bottom",0);a.fadeIn(300);
this.updateBar()}else{a=jQuery("#menuBar");b=jQuery("#go");a.fadeOut(400,function(){a.css("bottom",-a.outerHeight());a.show();b.css("left",0);b.addClass("min");b.animate({bottom:128},300)})}};this.settings=function(){if(this.modalManager.isOpen("settingsModal"))this.modalManager.remove("settingsModal");else if(this.modalManager.isOpen("licenseModal"))this.modalManager.remove("licenseModal");else{var a=this.modalManager.open("settingsModal","#protoFluid");a.bAutoDismiss=false;var b=this.license.plan;
if(b===undefined)b="free";b=b.substr(0,1).toUpperCase()+b.substr(1);a.setContent('<div><a class="osButton" id="aLicense">activate key</a></div><div>ProtoFluid '+b+"</div>");a.show();jQuery("#aLicense").click(function(){protoFluid.license.input(protoFluid.modalManager);return false})}this.updateBar()};this.sortFrames=function(){};this.standard=function(){this.free()};this.updateBar=function(){if(this.currentFrame===undefined){this.disableButtons();this.modalManager.isOpen("settingsModal")||this.modalManager.isOpen("licenseModal")?
jQuery("#settings").addClass("disabled"):jQuery("#settings").removeClass("disabled")}else{if(this.bDemo||!this.license.bCut){jQuery("#height").removeClass("disabled");this.bRestrictHeight?jQuery("#height").removeClass("on"):jQuery("#height").addClass("on");if(this.currentFrame.orientation){jQuery("#rotate").removeClass("disabled");this.bLandscape?jQuery("#rotate").addClass("on"):jQuery("#rotate").removeClass("on")}else{jQuery("#rotate").addClass("disabled");this.currentFrame.width>this.currentFrame.height?
jQuery("#rotate").addClass("on"):jQuery("#rotate").removeClass("on")}}if(!this.bDemo){this.currentFrameIndex===0?jQuery("#previous").addClass("disabled"):jQuery("#previous").removeClass("disabled");this.currentFrameIndex===this.frames.length-1?jQuery("#next").addClass("disabled"):jQuery("#next").removeClass("disabled");this.modalManager.isOpen("linkModal")?jQuery("#link").addClass("disabled"):jQuery("#link").removeClass("disabled");this.modalManager.isOpen("settingsModal")||this.modalManager.isOpen("licenseModal")?
jQuery("#settings").addClass("disabled"):jQuery("#settings").removeClass("disabled")}}};this.updateFrame=function(){bFlameDebug&&console.log("UPDATE frame. Including container, bar and info.");if(this.currentFrame===undefined)bFlameDebug&&console.log("FAILED frame update. Frame not defined.");else{this.updateFrameWidth();this.updateFrameHeight();this.viewport.css("visibility")==="hidden"&&this.viewport.css("visibility","visible");this.updateFrameContainer();this.updateBar();this.updateInfo()}};this.updateFrameContainer=
function(){if(this.currentFrame===undefined)bFlameDebug&&console.log("FAILED frame container update. Frame not defined.");else{var a=jQuery("#protoFluidFrame");(this.bShowFrame=this.bLandscape&&this.currentFrame.orientation?this.currentFrame.height>=document.documentElement.clientWidth?false:true:this.currentFrame.width>=document.documentElement.clientWidth?false:true)?this.viewport.css("margin","66px 0 160px"):this.viewport.css("margin","50px 0 128px");if(this.bShowFrame){a.height(this.viewport.height()+
64);a.width(this.viewport.width()+30);a.show();a.offset({left:this.viewport.offset().left-16,top:16})}else a.hide()}};this.updateFrameHeight=function(){navigator.userAgent.indexOf("Firefox")!==-1&&this.setHeight(16);if(this.bLandscape&&this.currentFrame.orientation)if(this.bRestrictHeight)this.setHeight(this.currentFrame.width);else this.bSameDomain?this.setHeight(this.frameDocument.scrollHeight):this.setHeight(4096);else if(this.bRestrictHeight)this.setHeight(this.currentFrame.height);else this.bSameDomain?
this.setHeight(this.frameDocument.scrollHeight):this.setHeight(4096);if(this.bRestrictHeight)if(this.bLandscape&&this.currentFrame.orientation)this.currentFrame.width+240>document.documentElement.clientHeight?jQuery("body").css("overflow","auto"):jQuery("body").css("overflow","hidden");else this.currentFrame.height+240>document.documentElement.clientHeight?jQuery("body").css("overflow","auto"):jQuery("body").css("overflow","hidden");else if(this.bSameDomain)this.frameDocument.scrollHeight+240>document.documentElement.clientHeight?
jQuery("body").css("overflow","auto"):jQuery("body").css("overflow","hidden");else jQuery("body").css("overflow","auto")};this.updateFrameRefs=function(){try{this.frameWindow=this.viewport[0].contentWindow}catch(a){this.frameWindow=undefined;bFlameDebug&&console.log("Could not get ProtoFluid frame window reference");return false}try{this.frameDocument=this.viewport[0].contentDocument.documentElement}catch(b){this.frameDocument=undefined;bFlameDebug&&console.log("Could not get ProtoFluid frame document reference. "+
b.message);return false}return true};this.updateFrameWidth=function(){this.bLandscape&&this.currentFrame.orientation?this.setWidth(this.currentFrame.height):this.setWidth(this.currentFrame.width)};this.updateInfo=function(){var a=jQuery("#info");if(this.bShowFrame){a.removeClass("noFrame");a.offset({left:this.viewport.offset().left});this.bLandscape&&this.currentFrame.orientation?a.width(this.currentFrame.height):a.width(this.currentFrame.width)}else{a.addClass("noFrame");a.width(this.currentFrame.width);
a.offset({left:0})}if(this.currentFrame.orientation)if(this.bTechInfo)if(this.bLandscape)this.bRestrictHeight?jQuery("#info").html(this.currentFrame.height+" x "+this.currentFrame.width):jQuery("#info").html(this.currentFrame.height+" x 100%");else this.bRestrictHeight?jQuery("#info").html(this.currentFrame.width+" x "+this.currentFrame.height):jQuery("#info").html(this.currentFrame.width+" x 100%");else if(this.bLandscape)if(this.bRestrictHeight)jQuery("#info").html(this.currentFrame.desc+" &mdash; landscape");
else this.bSameDomain?jQuery("#info").html(this.currentFrame.desc+" &mdash; landscape &mdash; document height"):jQuery("#info").html(this.currentFrame.desc+" &mdash; landscape &mdash; viewport fitted height");else if(this.bRestrictHeight)jQuery("#info").html(this.currentFrame.desc);else this.bSameDomain?jQuery("#info").html(this.currentFrame.desc+" &mdash; document height"):jQuery("#info").html(this.currentFrame.desc+" &mdash; viewport fitted height");else if(this.bTechInfo)this.bRestrictHeight?jQuery("#info").html(this.currentFrame.width+
" x "+this.currentFrame.height):jQuery("#info").html(this.currentFrame.width+" x 100%");else this.bRestrictHeight?jQuery("#info").html(this.currentFrame.desc):jQuery("#info").html(this.currentFrame.desc+" &mdash; document height")};return true}
function ProtoFluidFrame(a,b,c,d,e){this.width=a;this.height=b;this.desc=c;this.orientation=d;this.scroll=e;this.toString=function(){return this.desc+". "+this.width+" x "+this.height+"px. Orientation: "+this.orientation+", scrolling: "+this.scroll};return true}FlameModal.prototype.hidePolicy=function(){var a=this.domElement;this.domElement.fadeOut(400,function(){a.remove()})};
FlameModal.prototype.showPolicy=function(){this.domElement.show();this.domElement.addClass("menuBar");this.domElement.css("bottom",129);this.bNotification?this.domElement.css("left",document.documentElement.clientWidth/2-this.domElement.outerWidth()/2):this.domElement.css("left",0)};
